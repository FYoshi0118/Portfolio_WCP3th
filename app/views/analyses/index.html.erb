<div class="container mt-5">

  <%= render 'layouts/navbar_users.html.erb' %>

  <div class="row">
    <% if @posts.empty? %>
      <div class="col-12 text-danger text-center">投稿がないため表示できません。</div>
    <% else %>
      <!--<div class="col-6 mb-5">-->
      <div class="col-12 mb-3">
        <div class="card">
          <div class="card-body">
            <canvas id="chart-1"></canvas>
          </div>
        </div>
      </div>
      <!--<div class="col-6">-->
      <div class="col-12 mb-5">
        <div class="card">
          <div class="card-body">
            <canvas id="chart-2"></canvas>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
var ctx = document.getElementById("chart-1").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: <%= raw address_count_keys %>,
        datasets: [{
            label: "TOP5",
            data: <%= raw address_count_values %>,
            backgroundColor: 'rgba(38, 164, 242, 0.83)',
            borderColor: 'rgba(38, 164, 242, 0.83)',
            fill: false
        }]
    },
    options: {
        title:  {
          display: true,
          text: "都道府県別の飲酒回数",
          fontSize: 16
        },
        legend: {
          display: true,
          labels: {
            fontSize: 15
          }
        },
        scales: {
          yAxes: [{
            display: true,
            scaleLabel: {
              display: true,
              fontSize: 15,
              labelString: '飲酒回数'
            },
            ticks: {
              stepSize: 1,
              beginAtZero: true,
              min: 0,
              fontSize: 13
            }
          }],
          xAxes: [{
            display: true,
            scaleLabel: {
              display: true,
              fontSize: 15,
              labelString: '都道府県'
            },
            ticks: {
              fontSize: 13
            }
          }]
        }
    }
});
</script>

<script>
var ctx = document.getElementById("chart-2").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: <%= raw evaluation_prefecture_keys %>,
        datasets: [{
            label: "TOP5",
            data: <%= raw evaluation_prefecture_values %>,
            backgroundColor: 'rgba(38, 164, 242, 0.83)',
            borderColor: 'rgba(38, 164, 242, 0.83)',
            fill: false
        }]
    },
    options: {
        title:  {
          display: true,
          text: "県別の評価点数",
          fontSize: 16
        },
        legend: {
          display: true,
          labels: {
            fontSize: 15
          }
        },
        scales: {
          yAxes: [{
            display: true,
            scaleLabel: {
              display: true,
              fontSize: 15,
              labelString: '点数'
            },
            ticks: {
              stepSize: 1,
              beginAtZero: true,
              min: 0,
              fontSize: 13
            }
          }],
          xAxes: [{
            display: true,
            scaleLabel: {
              display: true,
              fontSize: 15,
              labelString: '都道府県'
            },
            ticks: {
              fontSize: 13
            }
          }]
        }
    }
});
</script>
